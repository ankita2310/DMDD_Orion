SET SERVEROUTPUT ON;
DECLARE
nCount NUMBER;
BEGIN
SELECT count(*) into nCount FROM user_tables where table_name = 'STUDENT';
IF(nCount > 0)
THEN
    DBMS_OUTPUT.PUT_LINE('TABLE STUDENT ALREADY EXISTS');
ELSE
     EXECUTE IMMEDIATE 'CREATE TABLE STUDENT(
      MEMBER_ID NUMBER(10)REFERENCES MEMBERS(MEMBER_ID),
      UNI_ID NUMBER(10) REFERENCES UNIVERSITY(UNI_ID),
      MAJ_ID NUMBER(10) REFERENCES COURSE_MAJOR(MAJ_ID),
      DEGREE_LEVEL NUMBER(10) REFERENCES DEGREE_LEVEL(DEG_ID),
      EMAIL VARCHAR(400) NOT NULL,
      STUDENT_BACKROUND VARCHAR(50) NOT NULL,
      EXPECTED_GRADDATE DATE NOT NULL,
      CHECK(EMAIL LIKE ''%@%edu%''))';  
 
EXECUTE IMMEDIATE 'INSERT INTO STUDENT  VALUES (5001,101,3001,(select DEG_ID from DEGREE_LEVEL WHERE UPPER(DEG_NAME)=''UNDERGRADUATE''),''HarrisonMiley@northeastern.edu'',''information systems'',((to_date(''Feb 2023'', ''Mon YYYY''))))';
EXECUTE IMMEDIATE 'INSERT INTO STUDENT  VALUES (5004,101,3002,(select DEG_ID from DEGREE_LEVEL WHERE UPPER(DEG_NAME)=''GRADUATE''),''GibsonDaryl@northeastern.edu'',''coumputer science'',((to_date(''Jan 2023'', ''Mon YYYY''))))';
EXECUTE IMMEDIATE 'INSERT INTO STUDENT  VALUES (5007,101,3003,(select DEG_ID from DEGREE_LEVEL WHERE UPPER(DEG_NAME)=''UNDERGRADUATE''),''GrayLucia@northeastern.edu'',''engineering'',((to_date(''Mar 2023'', ''Mon YYYY''))))';
EXECUTE IMMEDIATE 'INSERT INTO STUDENT  VALUES (5008,101,3007,(select DEG_ID from DEGREE_LEVEL WHERE UPPER(DEG_NAME)=''PHD''),''MurphyAlfred@northeastern.edu'',''informationsystem'',((to_date(''Jan 2024'', ''Mon YYYY''))))';
EXECUTE IMMEDIATE 'INSERT INTO STUDENT  VALUES (5009, 102,3007,(select DEG_ID from DEGREE_LEVEL WHERE UPPER(DEG_NAME)=''GRADUATE''),''OwensBlake@texasdallas.edu'',''informationsystem'',((to_date(''Aug 2022'', ''Mon YYYY''))))';
EXECUTE IMMEDIATE 'INSERT INTO STUDENT  VALUES (5013,104,3004,(select DEG_ID from DEGREE_LEVEL WHERE UPPER(DEG_NAME)=''GRADUATE''),''JonesBrianna@sunnybuffalow.edu'',''physics'',((to_date(''May 2022'', ''Mon YYYY''))))';
EXECUTE IMMEDIATE 'INSERT INTO STUDENT  VALUES (5016,105,3001,(select DEG_ID from DEGREE_LEVEL WHERE UPPER(DEG_NAME)=''PHD''),''JonesAlina@newyorkuniversity.edu'',''informatics'',((to_date(''Jul 2024'', ''Mon YYYY''))))';
END IF;
SELECT count(*) into nCount FROM user_tables where table_name = 'PROF_UNIVERSITY';
IF(nCount > 0)
THEN
    DBMS_OUTPUT.PUT_LINE('PROF_UNIVERSITY TABLE ALREADY EXISTS');
ELSE
    EXECUTE IMMEDIATE 'CREATE TABLE PROF_UNIVERSITY(
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY(START with 10 INCREMENT by 5),
    PROF_ID NUMBER(10) REFERENCES MEMBERS(MEMBER_ID),
    UNI_ID NUMBER(10) REFERENCES UNIVERSITY(UNI_ID),
    EMAIL VARCHAR(100),  
    CHECK(EMAIL LIKE ''%@%edu%''))';  

EXECUTE IMMEDIATE 'INSERT INTO Prof_University (PROF_ID, UNI_ID, EMAIL) VALUES (5003,101,''EdwardsWalter@northeastern.edu'')';
EXECUTE IMMEDIATE 'INSERT INTO Prof_University (PROF_ID, UNI_ID, EMAIL) VALUES (5003,102,''EdwardsWalter@texasdallas.edu'')';
EXECUTE IMMEDIATE 'INSERT INTO Prof_University (PROF_ID, UNI_ID, EMAIL) VALUES (5003,103,''EdwardsWalter@sanjos.edu'')';
EXECUTE IMMEDIATE 'INSERT INTO Prof_University (PROF_ID, UNI_ID, EMAIL) VALUES (5005,101,''ThompsonIsabella@northeastern.edu'')';
EXECUTE IMMEDIATE 'INSERT INTO Prof_University (PROF_ID, UNI_ID, EMAIL) VALUES (5010,104,''RussellDainton@sunnybuffalo.edu'')';
EXECUTE IMMEDIATE 'INSERT INTO Prof_University (PROF_ID, UNI_ID, EMAIL) VALUES (5011,105,''ThompsonStella@newyorkuniverstiy.edu'')';
EXECUTE IMMEDIATE 'INSERT INTO Prof_University (PROF_ID, UNI_ID, EMAIL) VALUES (5015,102,''ConnieHarper@texasdallas.edu'')';
EXECUTE IMMEDIATE 'INSERT INTO Prof_University (PROF_ID, UNI_ID, EMAIL) VALUES (5017,106,''RobertsBrianna@cambridgeuniversity.edu'')';
EXECUTE IMMEDIATE 'INSERT INTO Prof_University (PROF_ID, UNI_ID, EMAIL) VALUES (5018,107,''DaleBrooks@harvarduniverstiy.edu'')'; 

END IF;

SELECT count(*) into nCount FROM user_tables where table_name = 'OPEN_SOURCE_PROJECTS';
IF(nCount > 0)
THEN
    DBMS_OUTPUT.PUT_LINE('OPEN_SOURCE_PROJECTS TABLE ALREADY EXISTS');
ELSE
    EXECUTE IMMEDIATE 'CREATE TABLE OPEN_SOURCE_PROJECTS(
    PROJ_ID NUMBER GENERATED BY DEFAULT AS IDENTITY(START with 4001 INCREMENT by 1),
    PROJ_NAME  VARCHAR(100) NOT NULL,
    PROJ_DESC  VARCHAR(4000) NOT NULL,
    PROJ_REPO VARCHAR(400) NOT NULL,
    PROF_ID  NUMBER(10) REFERENCES MEMBERS(MEMBER_ID),
    UNI_ID NUMBER(10) REFERENCES UNIVERSITY(UNI_ID))';

EXECUTE IMMEDIATE 'INSERT INTO OPEN_SOURCE_PROJECTS ( PROJ_NAME,PROJ_DESC,PROJ_REPO,PROF_ID ,UNI_ID) VALUES (''ORION'',''inter university connection tool'',''https://github.com/ankita2310/DMDD_Orion'',5003,101)';
EXECUTE IMMEDIATE 'INSERT INTO OPEN_SOURCE_PROJECTS ( PROJ_NAME,PROJ_DESC,PROJ_REPO,PROF_ID,UNI_ID) VALUES (''GMOD'',''videogame development modding'',''https://github.com/Facepunch/garrysmod'',5015,102)';
EXECUTE IMMEDIATE 'INSERT INTO OPEN_SOURCE_PROJECTS ( PROJ_NAME,PROJ_DESC,PROJ_REPO,PROF_ID,UNI_ID) VALUES (''spark'',''improoving functionality of apache spark'',''https://github.com/awesome-spark/awesome-spark'',5010,104)';
EXECUTE IMMEDIATE 'INSERT INTO OPEN_SOURCE_PROJECTS ( PROJ_NAME,PROJ_DESC,PROJ_REPO,PROF_ID,UNI_ID) VALUES (''neuratech'',''creating list of BCI resources'',''https://github.com/NeuroTechX/awesome-bci'',5005,101)';

END IF;
SELECT count(*) into nCount FROM user_tables where table_name = 'EVENT';
IF(nCount > 0)
THEN
    DBMS_OUTPUT.PUT_LINE('EVENT TABLE ALREADY EXISTS');
ELSE
    EXECUTE IMMEDIATE 'CREATE TABLE EVENT(
    EVT_ID NUMBER GENERATED BY DEFAULT AS IDENTITY(START with 2001 INCREMENT by 1) PRIMARY KEY,
    EVT_NAME VARCHAR(100) NOT NULL,
    EVT_CAT_ID NUMBER(10) NOT NULL REFERENCES EVENT_CATEGORY(CAT_ID),
    EVT_DATETIME DATE NOT NULL,
    EVT_HOST_ID  NUMBER(10) REFERENCES MEMBERS(MEMBER_ID),
    EVT_VENUE NUMBER(10) REFERENCES EVENT_SITE (SITE_ID ),
    EVT_LINK VARCHAR(400),
    EVT_STATUS NUMBER(10) REFERENCES EVENT_STATUS(EVT_ID))';
    
EXECUTE IMMEDIATE 'INSERT INTO EVENT (EVT_NAME,EVT_CAT_ID,EVT_HOST_ID,EVT_STATUS,EVT_LINK,EVT_DATETIME)  VALUES (''OVERCOMING IMPOSTER SYNDROME'',2,5001,3,''http://calendar.northeastern.edu/event/overcoming_imposter_syndrome_in_academia'',((to_date(''03/05/2021'', ''DD/MM/YYYY''))))';    
EXECUTE IMMEDIATE 'INSERT INTO EVENT (EVT_NAME,EVT_CAT_ID,EVT_HOST_ID,EVT_VENUE,EVT_STATUS,EVT_DATETIME) VALUES (''Linguistics Program Poster Session'',2,5007,14,1,((to_date(''5/5/2021'', ''DD/MM/YYYY''))))';    
EXECUTE IMMEDIATE 'INSERT INTO EVENT (EVT_NAME,EVT_CAT_ID,EVT_HOST_ID,EVT_VENUE,EVT_STATUS,EVT_DATETIME) VALUES (''Post-COVID Futures: How Design and Architecture Affect Public Health Wellness and the Future of Work'',1,5002,11,2,((to_date(''04/06/2021'', ''DD/MM/YYYY''))))';  
EXECUTE IMMEDIATE 'INSERT INTO EVENT (EVT_NAME,EVT_CAT_ID,EVT_HOST_ID,EVT_STATUS,EVT_LINK,EVT_DATETIME)  VALUES (''ECE PhD Dissertation Defense: Ahmet Oner'',1,5008,2,''http://calendar.northeastern.edu/event/ece_phd_dissertation_defense_ahmet_oner'',((to_date(''04/06/2021'', ''DD/MM/YYYY''))))';  
EXECUTE IMMEDIATE 'INSERT INTO EVENT (EVT_NAME,EVT_CAT_ID,EVT_HOST_ID,EVT_STATUS,EVT_LINK,EVT_DATETIME)  VALUES (''ECE PhD Dissertation Defense: Ahmet Oner'',1,5008,2,''http://calendar.northeastern.edu/event/ece_phd_dissertation_defense_ahmet_oner'',((to_date(''04/06/2021'', ''DD/MM/YYYY''))))';  
EXECUTE IMMEDIATE 'INSERT INTO EVENT (EVT_NAME,EVT_CAT_ID,EVT_HOST_ID,EVT_STATUS,EVT_LINK,EVT_DATETIME)  VALUES (''ECE MS Thesis Defense: Yize Li'',8,5013,3,''http://calendar.northeastern.edu/event/ece_ms_thesis_defense_yize_li'',((to_date(''14/4/2021'', ''DD/MM/YYYY''))))';  

END IF;

SELECT count(*) into nCount FROM user_tables where table_name = 'EVENT_REGISTRATION';
IF(nCount > 0)
THEN
    DBMS_OUTPUT.PUT_LINE('EVENT_REGISTRATION TABLE ALREADY EXISTS');
ELSE
    EXECUTE IMMEDIATE 'CREATE TABLE EVENT_REGISTRATION (
    REG_ID NUMBER GENERATED BY DEFAULT AS IDENTITY(START with 10 INCREMENT by 1),
    MEMBER_ID NUMBER(10)REFERENCES MEMBERS(MEMBER_ID),
    EVT_ID NUMBER REFERENCES EVENT(EVT_ID) ON DELETE CASCADE)';   
EXECUTE IMMEDIATE 'INSERT INTO EVENT_REGISTRATION (EVT_ID, MEMBER_ID) VALUES (2001,5001)';
EXECUTE IMMEDIATE 'INSERT INTO EVENT_REGISTRATION (EVT_ID, MEMBER_ID) VALUES (2002,5004)';
EXECUTE IMMEDIATE 'INSERT INTO EVENT_REGISTRATION (EVT_ID, MEMBER_ID) VALUES (2003,5007)';
EXECUTE IMMEDIATE 'INSERT INTO EVENT_REGISTRATION (EVT_ID, MEMBER_ID) VALUES (2004,5008)';
EXECUTE IMMEDIATE 'INSERT INTO EVENT_REGISTRATION (EVT_ID, MEMBER_ID) VALUES (2005,5009)';
EXECUTE IMMEDIATE 'INSERT INTO EVENT_REGISTRATION (EVT_ID, MEMBER_ID) VALUES (2006,5013)';

END IF;
END;

COMMIT;